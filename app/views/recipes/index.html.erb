<h1>Mise en place</h1>


<%= simple_form_for :search, url: recipes_path, method: "GET", html: { class: '' } do |f| %>
  <div class="search-container">
    <%= f.input :query, input_html: { id:'search-bar', value: params.dig(:search, :query) }, placeholder: "Find a recipe", label:false %>
    <%= button_tag type: 'submit', class: "searchbutton" do %>
      <i class="fa-solid fa-magnifying-glass"></i>
    <% end %>
  </div>
  <div class="buttons-container">
    <%= f.input :category, as: :check_boxes,  input_html: { class: "tag-selector" }, legend_tag:false,
                item_wrapper_class: 'tag-item', collection: [["Vegan", "vegan"], ["Vegeterian", "vegetarian"], ["Meat", "meat"]] %>
    <div class="tag-item"><%= f.submit "Filter", id:'filter-button' %></div>
  </div>
<% end %>


<% @recipes.each do |recipe| %>
  <div class="card">
    <% if recipe.image? %>
      <%= image_tag recipe.image %>
    <% else %>
      <p>
        no image with this site
      </p>
    <% end %>
    <%#= label_tag 'label' %>
    <%= link_to recipe.title, recipe_path(recipe), class: "card-title" %>
    <%#= link_to '', recipe_path(recipe), class: 'card-link'  %>

    
      <button id="plus-sign" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
        +
      </button>

    <div class="collapse" id="collapseExample">
        <ul>
          <% recipe.ingredients.each do |ingredient| %>
            <li class="recipe-ingredients">
              <%= ingredient[:amount] %>

              <%= ingredient[:unit] %>

              <%= ingredient[:name].capitalize %>
            </li>
          <% end %>
        </ul>
    </div>
  </div>
<% end %>
