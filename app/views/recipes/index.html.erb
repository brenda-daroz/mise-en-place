<h1>Mise en place</h1>

<%= simple_form_for :search, url: recipes_path, method: "GET", html: { class: '' } do |f| %>
  <div class="search-container">
    <%= f.input :query,
            input_html: {
              id: "search-bar",
              value: params.dig(:search, :query)
            },
            placeholder: "Find a recipe",
            label: false %>
    <%= button_tag type: 'submit', class: "searchbutton" do %>
      <i class="fa-solid fa-magnifying-glass"></i>
    <% end %>
  </div>

  <div class="buttons-container">
    <%= f.input :category, as: :check_boxes,  input_html: { class: "tag-selector" }, legend_tag:false,
                item_wrapper_class: 'tag-item', collection: [["Vegan", "vegan"], ["Vegetarian", "vegetarian"], ["Meat", "meat"]] %>
    <div class="tag-item"><%= f.submit "Filter", id:'filter-button' %></div>
  </div>
<% end %>

<% @recipes.each do |recipe| %>
  <div class="card" data-controller="filter">
    <% if recipe.image? %>
      <%= link_to recipe_path(recipe) do %>
        <div class="image-container" style="background-image:url('<%= recipe.image %>');"></div>
       <% end  %>
    <% else %>
      <p>
        no image with this recipe
      </p>
    <% end %>

    <%= label_tag 'label', nil, class: "label" %>
    <div class="link-plus-container">
      <%= link_to recipe.title, recipe_path(recipe), class: "card-title" %>
      <button class="plus-sign" data-action="click->filter#expander">
        +
      </button>
    </div>
    <div class="collapse" data-filter-target="collapser">
        <ul>
          <% recipe.ingredients.each do |ingredient| %>
            <li class="recipe-ingredients">
              <%= ingredient[:name].capitalize %>
            </li>
          <% end %>
        </ul>
    </div>
  </div>
<% end %>
